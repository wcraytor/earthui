% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fit_earth.R
\name{fit_earth}
\alias{fit_earth}
\title{Fit an earth model}
\usage{
fit_earth(
  df,
  target,
  predictors,
  categoricals = NULL,
  linpreds = NULL,
  degree = 1L,
  allowed_func = NULL,
  nfold = NULL,
  nprune = NULL,
  thresh = NULL,
  penalty = NULL,
  minspan = NULL,
  endspan = NULL,
  fast.k = NULL,
  pmethod = NULL,
  glm = NULL,
  trace = NULL,
  nk = NULL,
  newvar.penalty = NULL,
  fast.beta = NULL,
  ncross = NULL,
  stratify = NULL,
  varmod.method = NULL,
  varmod.exponent = NULL,
  varmod.conv = NULL,
  varmod.clamp = NULL,
  varmod.minspan = NULL,
  keepxy = NULL,
  Scale.y = NULL,
  Adjust.endspan = NULL,
  Auto.linpreds = NULL,
  Force.weights = NULL,
  Use.beta.cache = NULL,
  Force.xtx.prune = NULL,
  Get.leverages = NULL,
  Exhaustive.tol = NULL,
  wp = NULL,
  ...,
  .capture_trace = TRUE
)
}
\arguments{
\item{df}{A data frame containing the modeling data.}

\item{target}{Character string. Name of the response variable.}

\item{predictors}{Character vector. Names of predictor variables.}

\item{categoricals}{Character vector. Names of predictors to treat as
categorical (converted to factors before fitting). Default is \code{NULL}.}

\item{linpreds}{Character vector. Names of predictors constrained to enter
the model linearly (no hinge functions). Default is \code{NULL}.}

\item{degree}{Integer. Maximum degree of interaction. Default is 1
(no interactions). When >= 2, cross-validation is automatically enabled.}

\item{allowed_func}{Function or \code{NULL}. An allowed function as returned by
\code{\link[=build_allowed_function]{build_allowed_function()}}. Only used when \code{degree >= 2}.}

\item{nfold}{Integer. Number of cross-validation folds. Automatically set
to 10 when \code{degree >= 2} unless explicitly provided. Set to 0 to disable.}

\item{nprune}{Integer or \code{NULL}. Maximum number of terms in the pruned model.}

\item{thresh}{Numeric. Forward stepping threshold. Default is earth's default
(0.001).}

\item{penalty}{Numeric. Generalized cross-validation penalty per knot.
Default is earth's default (if \code{degree > 1}, \code{3}; otherwise \code{2}).}

\item{minspan}{Integer or \code{NULL}. Minimum number of observations between
knots.}

\item{endspan}{Integer or \code{NULL}. Minimum number of observations before
the first and after the last knot.}

\item{fast.k}{Integer. Maximum number of parent terms considered at each
step of the forward pass. Default is earth's default (20).}

\item{pmethod}{Character. Pruning method. One of \code{"backward"}, \code{"none"},
\code{"exhaustive"}, \code{"forward"}, \code{"seqrep"}, \code{"cv"}. Default is \code{"backward"}.}

\item{glm}{List or \code{NULL}. If provided, passed to earth's \code{glm} argument
to fit a GLM on the earth basis functions.}

\item{trace}{Numeric. Trace earth's execution. 0 (default) = none,
0.3 = variance model, 0.5 = cross validation, 1-5 = increasing detail.}

\item{nk}{Integer or \code{NULL}. Maximum number of model terms before pruning.}

\item{newvar.penalty}{Numeric or \code{NULL}. Penalty for adding a new variable
in the forward pass (Friedman's gamma). Default 0.}

\item{fast.beta}{Numeric or \code{NULL}. Fast MARS ageing coefficient. Default 1.}

\item{ncross}{Integer or \code{NULL}. Number of cross-validations. Default 1.}

\item{stratify}{Logical or \code{NULL}. Stratify cross-validation samples.
Default \code{TRUE}.}

\item{varmod.method}{Character or \code{NULL}. Variance model method. One of
\code{"none"}, \code{"const"}, \code{"lm"}, \code{"rlm"}, \code{"earth"}, \code{"gam"}, \code{"power"},
\code{"power0"}, \code{"x.lm"}, \code{"x.rlm"}, \code{"x.earth"}, \code{"x.gam"}.}

\item{varmod.exponent}{Numeric or \code{NULL}. Power transform for variance model.}

\item{varmod.conv}{Numeric or \code{NULL}. Convergence criterion for IRLS.}

\item{varmod.clamp}{Numeric or \code{NULL}. Minimum estimated standard deviation.}

\item{varmod.minspan}{Integer or \code{NULL}. minspan for internal variance model.}

\item{keepxy}{Logical or \code{NULL}. Retain x, y in model object. Default \code{FALSE}.}

\item{Scale.y}{Logical or \code{NULL}. Scale response internally. Default \code{TRUE}.}

\item{Adjust.endspan}{Numeric or \code{NULL}. Interaction endspan multiplier.
Default 2.}

\item{Auto.linpreds}{Logical or \code{NULL}. Auto-detect linear predictors.
Default \code{TRUE}.}

\item{Force.weights}{Logical or \code{NULL}. Force weighted code path. Default
\code{FALSE}.}

\item{Use.beta.cache}{Logical or \code{NULL}. Cache coefficients in forward pass.
Default \code{TRUE}.}

\item{Force.xtx.prune}{Logical or \code{NULL}. Force X'X-based pruning. Default
\code{FALSE}.}

\item{Get.leverages}{Logical or \code{NULL}. Calculate hat values. Default \code{TRUE}.}

\item{Exhaustive.tol}{Numeric or \code{NULL}. Condition number threshold for
exhaustive pruning. Default 1e-10.}

\item{wp}{Numeric vector or \code{NULL}. Response weights.}

\item{...}{Additional arguments passed to \code{\link[earth:earth]{earth::earth()}}.}
}
\value{
A list with class \code{"earthui_result"} containing:
\describe{
\item{model}{The fitted earth model object.}
\item{target}{Name of the response variable.}
\item{predictors}{Names of predictor variables used.}
\item{categoricals}{Names of categorical predictors.}
\item{degree}{Degree of interaction used.}
\item{cv_enabled}{Logical; whether cross-validation was used.}
\item{data}{The data frame used for fitting.}
}
}
\description{
Wrapper around \code{\link[earth:earth]{earth::earth()}} with parameter validation and automatic
cross-validation when interaction terms are enabled.
}
\examples{
df <- mtcars
result <- fit_earth(df, target = "mpg",
                    predictors = c("cyl", "disp", "hp", "wt"))
format_summary(result)
}
